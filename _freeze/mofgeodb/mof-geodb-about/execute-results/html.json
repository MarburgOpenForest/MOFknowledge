{
  "hash": "50992ae55c7876fd88f52e8ff1f1e358",
  "result": {
    "markdown": "---\ntitle: 'Description MOFgeoDB'\nsubtitle: ''\ndescription: 'General description of the spatial database MOFgeoDB'\nauthor: goettlic\ndate: '2021-12-04'\nbibliography: ../MOFbib.bib\ncsl: ../journal-of-biogeography.csl\nlink-citations: true\n---\n\n![](/images/DJI_0071.JPG){width=\"75%\"}\n\n# General Setting\n\nThe MOFgeoDB is a [SQlite](https://www.sqlite.org/) database using the spatial extension [spatialite](https://www.gaia-gis.it/fossil/libspatialite) and serves our data of vegetation (mainly trees) and study plots for ecosystem research (forest structure, experiments) over time. Additional there are some auxiliary datasets (geopackage) of infrastructure for visual reasons. [QGIS](https://qgis.org/) is used as back-end for analysis and visualization. All data is available at [GitHub Repo MOFgeoDB](https://github.com/MarburgOpenForest/MOFgeoDB).\n\n# Relational Structure\nFirst overview of the relational structure gives figure \\@ref(fig:erd-complete-fig).\n\n![Complete ER diagram of MOFgeoDB without `lut_creator` table](images/erd_complete.png){width=\"75%\"}\n\nThe database can be divided into following sections:\n\n* Trees,\n* Plots,\n* Lookup tables.\n\nWhen necessary the creator (referenced via `creator_id`, see fig. \\@ref(fig:erd-lut-creator-fig)) and the date (day) of each single measurement is noted. Creator are stored in the look-up table `lut_creator` which can be a single person or (study) group and is designed rather simple.\n\n![Table lut_creator](images/erd_lut_creator_only.png)\n\n### Trees\nTrees are measured as single individiums from a diameter of 7 cm. All trees have a unique identifier (`tree_id`) which is a combination of a lowercase letter (r=red, b=blue) and a five digit number. These identifiers are nailed to the real trees as in figure \\@ref(fig:tree-marker) shown to identify them in the field.  Beside the geolocation of the center point at surface (`easting`,`northing`) and the method of this measurement (`geomeasurement_id`, see chapter geomeasurements), the species is mandatory via the species list (`species_id` from `german_sl`, [GermanSL](https://germansl.infinitenature.org/)).\n\n\n![Marker on tree as `tree_id`, here b00930](images/tree-marker.png){width=\"75%\"}\n\nGeolocation is possible via a direct measurement of coordinates (usually using some sort of GNSS or terrestrial survey) or the determination via a topopoint using angle and distance as polar coordinates. [Triggers](../2021-12-09-triggers/) calculate the coordinates on insert and update of relevant items.\n\nFollowing items can be additionally stored via the corresponding tables using the referencing `tree_id` and are dependent on time:\n\n* general parameters\n  * diameter: default breast height 1.3 m, [triggers](../2021-12-09-triggers/) calculation of perimeter or diameter on circle\n  * height: method is free text\n  * state: looking up tree state via `state_id` as shown in table [lut_tree_state](../2021-12-10-lookup-tables/).\n  * social position: after @eichhorn_part_2020 p.11\n  * vitality: after @roloff_baumkronen_2001\n  * habitat: multiple micro-habitats per tree after @larrieu_tree_2018-1\n* special investigations\n  * sapflow: some trees installed with sapflow measurement (no values available by now)\n  * dendroband: manual dendrometer, see figure foto\n  * yearring: investigation of yearrings using cores (conducted by Burkhard Neuwirth, [DELAWI](http://www.delawi.de/))\n  * roost: determined roosts for bats\n* dead wood\n  * lying deadwood: size and position of lying deadwood >20 cm diameter\n  * decomposition: decomposition rate for deadwood after @schwill_handbuch_2016 p.10\n  \n### Plots\nThere are different type of survey plots (see also [`lut_plottype`](../2021-12-10-lookup-tables/)):\n\n* forest structure **fs**\n* exclosure plot **exc**\n* dendro ecology **de**\n* dendrometer band field **dm**\n* pasture structure **ps**\n* polygon unspecified **pg**\n* subplot **sub**\n\nMost common is the fs-plot for forest structure survey. Most of the plots get their geolocation from a fixed benchmark in the field (see figure \\@ref(fig:benchmark-fig)) documented in `topopoint`.\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Benchmark](images/benchmark.png){fig-align='center' fig-alt='Benchmark' width=644}\n:::\n:::\n\n\nThe `plot_diary`can be used to document surveys on a plot linking specific actions (`lut_action`) to the desired plot and time. Automatic generation of subplots are possible and is implemented using triggers for the exclosure plot design. Triggers also manage the insertion, update and deletion of topopoints and plots.\n\nAll plottypes are documented in the post [Plots](../2021-12-10-plots/).\n\n### Views\nViews are created in the database to collect data from different tables for various reasons. It is a very convenient way to work with just one table for further analysis or visualizations. It insures the use of the desired data and has the capability to generate new fields like statistical parameters. All generated views are discussed in an special [post](../2021-12-10-views/).\n\n### Lookup Tables\nLookup tables just serve the idea to connect recurring items using a primary key. All lookup tables are documented in a separate [post](../2021-12-10-lookup-tables/).\n\n# Auxiliary Data\n\n### Vector data\n\nOther geographic datasets are stored as geopackage. In the `supplementary` geopackage following layers are available:\n\n* streets: including footpaths, etc. based on OSM, arial images and  Lidar\n* water: \n* forest divisions: as used by HessenForst\n* infrastructure: point data on scietifc instruments and other POIs\n* area plots: non scientific plots or fences\n\nThe `elevation_simple` geopackage shows simplified contours derived from the DEM.\n\n### QGIS\nA QGIS projectfile is offered for a sophisticated cartographic representation of the data.\n\n# Raster Data\nAll raster data is stored in seperated files as geoTiff.\n\n### UAV\nOrthofotos and pointclouds are generated on behalf of  [NATUR4.0](https://github.com/Nature40) from UAV raw data. More derivates are calculateted like tree segmentation, canopy heights, etc. (see somewhere? cite?) \n\n### LIDAR\nLidar Data from the state authorities are used to calculate DEM, DGM and canopy height.\n\n### Arial / Satellite Imagery\nArial RGB orthofotos from the state authoroties and several satellite imagery (Sentinel, planetscope) are available.\n\n# Resources",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}